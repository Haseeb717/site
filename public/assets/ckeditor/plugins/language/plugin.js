/*
 Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
!function(){CKEDITOR.plugins.add("language",{requires:"menubutton",lang:"ar,bg,ca,cs,cy,da,de,el,en,en-gb,eo,es,fa,fi,fo,fr,gl,he,hr,hu,it,ja,km,ko,ku,nb,nl,no,pl,pt,pt-br,ru,sk,sl,sq,sv,tr,tt,uk,vi,zh,zh-cn",icons:"language",hidpi:!0,init:function(e){var n=e.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],a=this,t=e.lang.language,l={},r,g,u,o;for(e.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(e,n){var a=l["language_"+n];a&&e[a.style.checkActive(e.elementPath(),e)?"removeStyle":"applyStyle"](a.style)},refresh:function(e){this.setState(a.getCurrentLangElement(e)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}}),o=0;o<n.length;o++)r=n[o].split(":"),g=r[0],u="language_"+g,l[u]={label:r[1],langId:g,group:"language",order:o,ltr:"rtl"!=(""+r[2]).toLowerCase(),onClick:function(){e.execCommand("language",this.langId)},role:"menuitemcheckbox"},l[u].style=new CKEDITOR.style({element:"span",attributes:{lang:g,dir:l[u].ltr?"ltr":"rtl"}});l.language_remove={label:t.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:l.length,onClick:function(){var n=a.getCurrentLangElement(e);n&&e.execCommand("language",n.getAttribute("lang"))}},e.addMenuGroup("language",1),e.addMenuGroup("language_remove"),e.addMenuItems(l),e.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:t.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var n={},t=a.getCurrentLangElement(e),r;for(r in l)n[r]=CKEDITOR.TRISTATE_OFF;return n.language_remove=t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t&&(n["language_"+t.getAttribute("lang")]=CKEDITOR.TRISTATE_ON),n}})},getCurrentLangElement:function(e){var n=e.elementPath(),e=n&&n.elements,a;if(n)for(var t=0;t<e.length;t++)n=e[t],!a&&"span"==n.getName()&&n.hasAttribute("dir")&&n.hasAttribute("lang")&&(a=n);return a}})}();