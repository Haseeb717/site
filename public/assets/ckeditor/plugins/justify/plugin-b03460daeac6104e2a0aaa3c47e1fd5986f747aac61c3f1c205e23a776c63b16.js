/*
 Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
!function(){function t(t,e){var e=void 0===e||e,s;if(e)s=t.getComputedStyle("text-align");else{for(;(!t.hasAttribute||!t.hasAttribute("align")&&!t.getStyle("text-align"))&&(s=t.getParent());)t=s;s=t.getStyle("text-align")||t.getAttribute("align")||""}return s&&(s=s.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!s&&e&&(s="rtl"==t.getComputedStyle("direction")?"right":"left"),s}function e(t,e,s){this.editor=t,this.name=e,this.value=s,this.context="p";var e=t.config.justifyClasses,a=t.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(e){switch(s){case"left":this.cssClassName=e[0];break;case"center":this.cssClassName=e[1];break;case"right":this.cssClassName=e[2];break;case"justify":this.cssClassName=e[3]}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+e.join("|")+")(?=$|\\s)"),this.requiredContent=a+"("+this.cssClassName+")"}else this.requiredContent=a+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},t.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function s(t){var e=t.editor,s=e.createRange();s.setStartBefore(t.data.node),s.setEndAfter(t.data.node);for(var a=new CKEDITOR.dom.walker(s),i;i=a.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(t.data.node)&&i.getDirection())s.setStartAfter(i),a=new CKEDITOR.dom.walker(s);else{var l=e.config.justifyClasses;l&&(i.hasClass(l[0])?(i.removeClass(l[0]),i.addClass(l[2])):i.hasClass(l[2])&&(i.removeClass(l[2]),i.addClass(l[0]))),l=i.getStyle("text-align"),"left"==l?i.setStyle("text-align","right"):"right"==l&&i.setStyle("text-align","left")}}e.prototype={exec:function(e){var s=e.getSelection(),a=e.config.enterMode;if(s){for(var i=s.createBookmarks(),l=s.getRanges(),n=this.cssClassName,o,r,u=e.config.useComputedState,u=void 0===u||u,f=l.length-1;0<=f;f--)for(o=l[f].createIterator(),o.enlargeBr=a!=CKEDITOR.ENTER_BR;r=o.getNextParagraph(a==CKEDITOR.ENTER_P?"p":"div");)if(!r.isReadOnly()){r.removeAttribute("align"),r.removeStyle("text-align");var c=n&&(r.$.className=CKEDITOR.tools.ltrim(r.$.className.replace(this.cssClassRegex,""))),d=this.state==CKEDITOR.TRISTATE_OFF&&(!u||t(r,!0)!=this.value);n?d?r.addClass(n):c||r.removeAttribute("class"):d&&r.setStyle("text-align",this.value)}e.focus(),e.forceNextSelectionCheck(),s.selectBookmarks(i)}},refresh:function(e,s){var a=s.block||s.blockLimit;this.setState("body"!=a.getName()&&t(a,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("justify",{lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"justifyblock,justifycenter,justifyleft,justifyright",hidpi:!0,init:function(t){if(!t.blockless){var a=new e(t,"justifyleft","left"),i=new e(t,"justifycenter","center"),l=new e(t,"justifyright","right"),n=new e(t,"justifyblock","justify");t.addCommand("justifyleft",a),t.addCommand("justifycenter",i),t.addCommand("justifyright",l),t.addCommand("justifyblock",n),t.ui.addButton&&(t.ui.addButton("JustifyLeft",{label:t.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),t.ui.addButton("JustifyCenter",{label:t.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),t.ui.addButton("JustifyRight",{label:t.lang.justify.right,command:"justifyright",toolbar:"align,30"}),t.ui.addButton("JustifyBlock",{label:t.lang.justify.block,command:"justifyblock",toolbar:"align,40"})),t.on("dirChanged",s)}}})}();