/*
 Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
!function(){CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},init:function(e){if(CKEDITOR.plugins.clipboard.isFileApiSupported){var a=CKEDITOR.fileTools,i=a.getUploadUrl(e.config,"image");i?(a.addUploadWidget(e,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif)/,uploadUrl:i,fileToElement:function(){var e=new CKEDITOR.dom.element("img");return e.setAttribute("src",t),e},parts:{img:"img"},onUploading:function(t){this.parts.img.setAttribute("src",t.data)},onUploaded:function(t){this.replaceWith('<img src="'+t.url+'" width="'+this.parts.img.$.naturalWidth+'" height="'+this.parts.img.$.naturalHeight+'">')}}),e.on("paste",function(t){if(t.data.dataValue.match(/<img[\s\S]+data:/i)){var t=t.data,o=document.implementation.createHTMLDocument(""),o=new CKEDITOR.dom.element(o.body),d,n,l;for(o.data("cke-editable",1),o.appendHtml(t.dataValue),d=o.find("img"),l=0;l<d.count();l++){n=d.getItem(l);var r=n.getAttribute("src")&&"data:"==n.getAttribute("src").substring(0,5),u=null===n.data("cke-realelement");r&&u&&!n.data("cke-upload-id")&&!n.isReadOnly(1)&&(r=e.uploadRepository.create(n.getAttribute("src")),r.upload(i),a.markElement(n,"uploadimage",r.id),a.bindNotifications(e,r))}t.dataValue=o.getHtml()}})):window.console&&window.console.log("Error: Upload URL for the Upload Image feature was not defined. For more information see: http://docs.ckeditor.com/#!/guide/dev_file_upload")}}});var t="data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="}();